<div id="loader-wrapper" class="loader-wrapper">
    <div class="canvas-container">
        <canvas id="pourCanvas"></canvas>
    </div>
</div>

<style>
    :root {
        --brand-green: #b7ca64;
        --brand-black: #0a0a0a;
        --concrete: #4a4a4a;
    }

    body.loader-active {
        overflow: hidden;
    }

    #loader-wrapper {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #1b1f24;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 999999;
        overflow: hidden;
        margin: 0;
        padding: 0;
        border: 0;
    }

    .canvas-container {
        position: relative;
        width: min(500px, 80vw);
        height: min(500px, 80vh);
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    #pourCanvas {
        display: block;
        filter: drop-shadow(0 20px 60px rgba(0,0,0,0.8));
        margin: 0;
        padding: 0;
    }

    @keyframes loaderExit {
        0% {
            opacity: 1;
            transform: scale(1);
        }
        100% {
            opacity: 0;
            transform: scale(1.2);
        }
    }

    #loader-wrapper.closing {
        animation: loaderExit 0.8s ease-out forwards;
    }

    @media (max-width: 768px) {
        .canvas-container {
            width: 200px;
            height: 200px;
            max-width: 80vw;
            max-height: 80vh;
        }
    }

    @media (max-width: 480px) {
        .canvas-container {
            width: 150px;
            height: 150px;
            max-width: 75vw;
            max-height: 75vh;
        }

        #pourCanvas {
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.8));
        }
    }

    @media (max-width: 360px) {
        .canvas-container {
            width: 120px;
            height: 120px;
            max-width: 70vw;
            max-height: 70vh;
        }

        #pourCanvas {
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.8));
        }
    }
</style>

<script>
    (function initLoader() {
        // Show loader on every page load
        // Add loader-active class to body to prevent scrolling
        document.body.classList.add('loader-active');
        
        const canvas = document.getElementById('pourCanvas');
        if (!canvas) return;
        
        const ctx = canvas.getContext('2d');
        
        // Calculate responsive size based on viewport
        let SIZE = 500;
        if (window.innerWidth <= 480) {
            SIZE = Math.min(220, window.innerWidth * 0.85);
        } else if (window.innerWidth <= 768) {
            SIZE = Math.min(280, window.innerWidth * 0.85);
        }
        
        canvas.width = SIZE;
        canvas.height = SIZE;

        // SVG Path Data Definitions
        const p0Data = "m1002.47 62.3c-0.3 0.76-0.42 4.94-0.26 9.29l0.29 7.91h19v-18c-16.35-0.51-18.6-0.26-19.03 0.8z";
        const p1Data = "m379.55 84.5c0.33 1.1 1.93 1.5 5.95 1.5 3.02 0 10.79 0.91 17.25 2.02 6.46 1.12 16.25 3.21 21.75 4.66 5.5 1.44 13.37 4.06 17.5 5.82 4.12 1.76 10.2 4.5 13.5 6.08 3.3 1.58 8.25 4.19 11 5.81 2.75 1.61 8.15 4.97 12 7.46 3.85 2.5 11.27 8.43 16.5 13.19 5.23 4.75 12.33 11.98 15.79 16.05 3.46 4.08 8.78 10.56 11.83 14.41 3.05 3.85 7.72 11.05 10.37 16 2.66 4.95 6.7 13.5 8.99 19 2.28 5.5 4.54 10.9 5.02 12 0.47 1.1 1.76 4.93 2.86 8.5 1.11 3.57 2.74 9.43 3.63 13 0.89 3.57 2.24 9.43 3 13 0.75 3.57 2.1 12.8 2.99 20.5 0.89 7.7 1.63 20.07 1.65 27.5 0.02 7.43-0.49 20.93-1.12 30-0.63 9.07-2 22.13-3.05 29-1.05 6.88-2.85 16.32-4.01 21-1.16 4.68-3.17 11.2-4.46 14.5-1.3 3.3-3.06 8.48-3.93 11.5-0.86 3.02-4.31 11.13-7.65 18-3.35 6.88-8.63 16.01-11.75 20.29-3.11 4.28-6.99 9.68-8.61 12-1.61 2.32-8.59 9.89-15.5 16.83-6.9 6.95-15.48 14.7-19.05 17.23-3.57 2.53-7.4 5.3-8.5 6.16-1.1 0.86-3.57 2.55-5.49 3.77-1.92 1.22-8.89 4.92-15.49 8.22-8.64 4.32-12.1 6.56-12.33 8-0.17 1.1 2.39 7.17 5.69 13.5 3.3 6.33 8.75 16.67 12.1 23 3.35 6.33 10.12 19.71 15.05 29.75 4.94 10.04 9.53 18.26 10.22 18.27 0.72 0 1.57-2 2.01-4.75 0.41-2.63 0.75-24.35 0.74-48.27l-0.02-43.5c5.05-3.07 9.68-6.67 13.54-9.98 3.86-3.31 10.38-9.64 14.5-14.06 4.11-4.43 10.01-10.95 13.11-14.5 3.09-3.55 7.41-9.39 9.58-12.96 2.18-3.57 6.06-10.21 8.63-14.75 2.56-4.54 6.75-13.31 9.3-19.5 2.55-6.19 5.72-14.4 7.05-18.25 1.33-3.85 3.52-11.61 4.86-17.25 1.35-5.64 3.16-13.96 4.03-18.5 0.87-4.54 2.19-13.43 2.94-19.75 0.75-6.32 1.39-19.71 1.42-29.75l0.06-18.25h79c0.39 155.65 0.88 201.21 1.34 201.67 0.46 0.46 17.56 1 38 1.22 20.44 0.21 45.6 0.1 55.91-0.25l18.75-0.64v-202c108.89-0.01 144.22-0.35 148.76-0.76l8.26-0.74-0.02-203.5c-515.12 0-545.86 0.17-545.45 1.5zm-144.55 154.11c-2.98 0.37-3.61 0.91-4.26 3.66-0.42 1.78-0.76 31.58-0.76 66.23 0 34.65 0.35 65.14 0.76 67.76 0.43 2.67 1.42 5.04 2.26 5.41 0.83 0.36 19.73 0.86 42 1.1 29.8 0.32 42.48 0.11 48-0.82 4.13-0.7 11.1-2.55 15.5-4.12 4.4-1.57 9.77-4.08 11.93-5.59 2.16-1.51 6.21-4.81 9-7.35 2.79-2.53 6.42-6.56 8.07-8.95 1.65-2.38 4.53-8.86 6.4-14.39 3.14-9.29 3.43-11.23 3.87-25.55 0.31-10.09 0.04-17.94-0.78-22.5-0.69-3.85-2.55-10.38-4.13-14.5-1.59-4.13-5.13-10.54-7.87-14.25-2.75-3.71-7.58-8.82-10.74-11.35-3.16-2.52-8.45-5.89-11.75-7.49-3.3-1.59-10.5-3.76-16-4.82-8.46-1.63-16-2-49-2.41-21.45-0.27-40.57-0.3-42.5-0.07zm-1.56 295.08c-1.14 0.23-2.37 1.41-2.74 2.62-0.37 1.2-0.68 51.35-0.69 111.44l-0.01 109.25h-171v192h426.5c0-147.12-0.37-190.21-0.83-190.67-0.46-0.45-23.97-0.94-52.25-1.08l-51.42-0.25c-8.73-17.44-20.49-40.5-31.76-62.5-11.28-22-23.87-46.52-28-54.5-4.13-7.98-12.47-24.17-18.54-36-6.07-11.83-16.56-32.3-23.3-45.5l-12.25-24c-5.93-1.15-13.05-1.42-19.65-1.35-6.6 0.07-12.93 0.31-14.06 0.54zm429.56 137.18l-7.5 0.63c-0.98 10.08-1.32 31-1.38 53-0.07 22 0.22 81.51 0.63 132.25l0.75 92.25h112.5c-0.39-214.55-0.88-277.21-1.33-277.67-0.46-0.45-22.29-0.89-48.5-0.96-26.22-0.07-51.04 0.16-55.17 0.5zm-193.5 296.16c-2.75 1.06-6.73 3.4-8.85 5.2-2.12 1.8-5.05 5.75-6.5 8.77-2.35 4.87-2.65 6.7-2.65 16 0 8.51 0.39 11.35 2.07 15 1.15 2.48 3.45 6.08 5.13 8 1.68 1.92 5.02 4.51 7.43 5.73 2.4 1.23 7.18 2.69 10.62 3.25 4.3 0.7 8.36 0.69 13-0.04 3.71-0.58 8.55-2.11 10.75-3.41 2.2-1.29 5.21-3.63 6.7-5.19 1.48-1.56 3.73-5.09 5-7.84 1.96-4.26 2.3-6.63 2.3-16 0-10.36-0.17-11.31-3-16.38-1.65-2.96-4.35-6.58-6-8.05-1.65-1.47-5.59-3.66-8.75-4.87-4.31-1.65-7.82-2.19-14-2.15-5.64 0.04-9.83 0.66-13.25 1.98zm8.5 10.62c0.83-0.33 3.75-0.43 6.5-0.23 4.24 0.32 5.49 0.92 8.25 3.98 1.79 1.98 3.75 5.51 4.36 7.85 0.61 2.34 0.92 6.95 0.68 10.25-0.29 4.05-1.3 7.54-3.11 10.75-2.09 3.7-3.51 5-6.43 5.88-2.06 0.62-5.55 0.85-7.75 0.52-2.2-0.34-5.06-1.63-6.35-2.88-1.28-1.25-2.97-3.51-3.75-5.02-0.77-1.51-1.68-5.34-2.03-8.5-0.43-3.94-0.13-7.49 0.95-11.25 0.93-3.26 2.72-6.57 4.38-8.13 1.54-1.44 3.48-2.89 4.3-3.22zm123.5-11.1c-2.2 0.8-5.07 2.47-6.38 3.7-1.31 1.24-2.99 3.71-3.75 5.5-0.75 1.79-1.37 5.5-1.37 8.25 0 2.75 0.68 6.58 1.5 8.5 0.83 1.92 3.19 4.6 5.25 5.94 2.06 1.34 8.25 3.57 13.75 4.96 6.25 1.58 10.47 3.2 11.27 4.31 0.69 0.99 1.26 2.46 1.26 3.29 0 0.83-0.64 2.4-1.44 3.5-1.12 1.56-2.85 2.08-7.76 2.35-4.89 0.28-8.04-0.23-13.83-2.24-4.12-1.43-7.95-2.72-8.5-2.86-0.6-0.15-1 2.58-1 6.75v7c11.04 2.84 18.02 3.66 23.5 3.74 7.05 0.09 10.53-0.32 13.5-1.61 2.2-0.96 5.07-2.73 6.38-3.94 1.31-1.2 2.99-3.65 3.75-5.44 0.75-1.79 1.37-5.73 1.37-8.75 0-3.18-0.74-7.03-1.75-9.14-1.03-2.15-3.39-4.59-5.75-5.96-2.2-1.27-8.05-3.22-13-4.33-4.95-1.11-10.12-2.88-11.5-3.93-2.25-1.73-2.38-2.17-1.25-4.53 0.69-1.43 2.38-3.06 3.75-3.61 1.38-0.55 4.53-1 7-1 2.48 0 7.31 0.89 10.75 1.99 3.44 1.09 6.59 1.99 7 2 0.41 0 0.76-3.03 0.76-6.74l0.02-6.75c-9.71-1.92-16.35-2.46-21.03-2.45-4.87 0.02-10.21 0.66-12.5 1.5zm-218.5 30.45v31h17v-26h23v26h17v-62h-17v23h-23v-23h-17zm143.08-0.08l-0.08 31.08h17v-23c6-0.06 8.6 0.75 10.25 1.97 1.64 1.21 4.57 5.87 7.25 11.53l4.5 9.5h18c-6.44-13.56-9.29-19.08-10.48-21-1.2-1.92-3.34-4.4-4.76-5.5l-2.58-2c5.29-4.26 7.55-6.96 8.45-8.75 1.11-2.22 1.5-5.04 1.25-8.92-0.25-3.73-1.1-6.63-2.48-8.5-1.16-1.55-3.64-3.73-5.5-4.83-3.01-1.77-5.56-2.04-22.07-2.33l-18.67-0.33zm17.22-19.2l6.1 0.59c4.28 0.4 6.48 1.12 7.37 2.38 0.69 1 1.26 3.27 1.25 5.06-0.01 1.9-0.85 4.08-2.02 5.25-1.52 1.52-3.33 2-13 2l0.15-7.64zm109.7 19.28v31h45v-12h-28v-14h26v-13h-26v-10h27v-13h-44zm58 0v31h16l0.07-43.5 13.43 31.47 11.5 0.03 12.93-30.5 0.07 42.5h16v-62l-21.32 0.5c-10.22 23.57-13.41 30.27-13.68 30.08-0.28-0.18-3.43-7.15-7-15.47l-6.5-15.13-21.5 0.02zm98.89-28.25c-0.59 1.51-5.73 15.35-11.42 30.75-5.7 15.4-10.28 28.08-10.17 28.17 0.11 0.09 3.05 0.32 6.55 0.5l6.35 0.33c12.99-32.55 17.26-43.12 17.86-44.5 1-2.27 1.97-0.32 10.42 21l9.32 23.5c11.39-0.51 14.74-0.73 14.79-0.83 0.05-0.09-4.34-12.09-9.74-26.67-5.41-14.57-10.51-28.41-11.34-30.75l-1.51-4.25c-20.03 0-20.04 0-21.11 2.75zm53.11 29.25v30l20.5 0.09 18.48-30.59 0.02 30.5h20v-60h-21l-17.5 29.4-0.44-29.4h-20.06z";
        const p2Data = "m950.6 98.25c-0.79 1.24-2.21 4.95-3.14 8.25-1.28 4.51-1.59 8.48-1.24 16 0.33 7.35 1.09 11.59 2.83 16 1.5 3.77 4.06 7.68 6.91 10.52 2.5 2.48 7.24 5.85 10.54 7.5 5.68 2.82 6.64 2.98 18 2.94 10.22-0.04 12.71-0.37 16.75-2.25 2.61-1.22 7.05-4.35 9.86-6.96 2.82-2.61 6.14-6.78 7.38-9.25 1.25-2.47 2.83-6.97 3.51-10 0.73-3.24 1.04-8.99 0.76-14-0.27-4.67-1.27-10.75-2.23-13.5-0.96-2.75-2.26-5.58-2.89-6.29-0.73-0.83-3.57-1.28-7.89-1.25-3.71 0.02-6.74 0.38-6.73 0.79 0.01 0.41 1.22 3.22 2.69 6.25 1.76 3.61 2.83 7.73 3.12 12 0.27 3.97-0.08 8.06-0.9 10.5-0.74 2.2-2.49 5.3-3.89 6.89-1.39 1.58-4.34 3.83-6.54 5-3.27 1.72-5.76 2.11-13.58 2.11-8.9 0-9.92-0.21-14.42-3-3.24-2.01-5.62-4.49-7.19-7.5-1.84-3.51-2.34-6.04-2.31-11.5 0.04-5.17 0.71-8.57 2.58-13 1.4-3.3 2.74-6.56 2.98-7.25 0.32-0.92-1.39-1.25-6.54-1.25-6.15 0-7.15 0.27-8.42 2.25zm-4.6 91.25v12.5l39.22 23.5-39.22 0.5 0.5 24.5h75l0.5-25c-27.51-16.6-36.4-22.1-37.5-22.93-1.8-1.36-0.07-1.51 17.75-1.54l19.75-0.03v-24h-76zm1.01 91.49l-0.01 10.01h75l-0.5-19.5-74.48-0.52zm47.99 62.99c-2.47 0.34-5.4 1.11-6.5 1.73-1.1 0.61-3.21 2.39-4.69 3.95-1.49 1.56-3.4 4.53-4.25 6.59-0.86 2.06-2.42 7.91-3.48 13-1.05 5.09-2.51 10.52-3.25 12.07-0.76 1.61-2.39 3.04-3.83 3.36-1.37 0.3-3.51 0.04-4.75-0.57-1.24-0.61-2.74-2.35-3.34-3.86-0.63-1.59-0.91-6.35-0.65-11.25 0.27-5.29 1.25-10.68 2.59-14.25 1.63-4.36 1.85-5.88 0.9-6.29-0.69-0.29-4.15-0.4-7.71-0.25l-6.46 0.29c-2.41 7.5-2.92 13.83-2.98 23.5-0.09 13.06 0.12 14.9 2.06 18.5 1.19 2.2 3.44 5.21 5 6.68 1.56 1.48 4.08 3.17 5.59 3.75 1.51 0.59 5.68 1.07 9.25 1.07 4.5 0 7.73-0.62 10.5-2 2.31-1.15 5.06-3.7 6.5-6 1.38-2.2 3.86-9.06 5.52-15.25 1.65-6.19 3.68-12.26 4.5-13.5 0.81-1.24 2.72-2.51 4.23-2.83 1.72-0.36 3.6 0.02 5 1 1.24 0.87 2.7 2.7 3.25 4.08 0.55 1.37 0.99 5.31 0.98 8.75-0.01 4.24-0.92 8.82-2.83 14.25-1.55 4.4-3.11 8.79-3.48 9.75-0.6 1.57 0.12 1.75 7.33 1.75h8c2.31-8.14 3.44-12.98 4-16 0.56-3.03 1.02-8.88 1.02-13 0-4.13-0.66-9.75-1.46-12.5-0.8-2.75-2.49-6.55-3.76-8.44-1.26-1.9-4.32-4.44-6.8-5.66-2.47-1.22-6.07-2.4-8-2.62-1.92-0.23-5.52-0.13-8 0.2zm12.54 73.64c-0.48 0.39-0.8 8.06-0.7 17.04l0.16 16.34h-17v-31l-14.5 0.5-0.5 30.5h-13l-0.5-32.5-14.5-0.5v53h75l-0.5-53.5c-10.14-0.45-13.48-0.27-13.96 0.12zm-60.53 81.37l-0.01 10.01h75l-0.5-19.5-74.47-0.53zm-1.02 43.52v12.5l39.23 23.5-39.23 0.5 0.5 24.5h75l0.59-25-39.59-24 39.5-0.5v-24h-76zm65 76.89c-4.67 1.8-21.01 7.96-36.31 13.69l-27.81 10.42 0.62 22.97c57.35 21.3 74.12 27.49 74.25 27.5 0.14 0.02 0.25-3.46 0.24-7.72v-7.75c-44.93-17.83-57.97-23.23-57.97-23.5 0-0.28 13.04-5.68 28.98-12l28.99-11.5c0.01-13.33-0.34-15.49-1.24-15.44-0.68 0.03-5.07 1.53-9.75 3.33zm-48 71.07c-2.47 0.79-5.85 2.73-7.5 4.32-1.65 1.58-4.11 5.09-5.47 7.79-2.38 4.73-2.49 5.79-2.75 26.68l-0.28 21.75h75l-0.5-19.5-25.5-0.5c0.01-11.24-0.48-17.2-1.09-20.5-0.61-3.3-1.79-7.35-2.62-9-0.84-1.65-2.48-4.06-3.65-5.35-1.18-1.29-3.94-3.26-6.14-4.38-2.2-1.12-6.47-2.2-9.5-2.4-3.07-0.2-7.48 0.28-10 1.09zm3.5 19.98c1.83-0.91 4.37-1.28 6.5-0.95 1.93 0.3 4.14 1.1 4.91 1.77 0.77 0.68 2.01 2.7 2.75 4.49 0.74 1.78 1.34 5.95 1.34 15.25h-21v-7c0-3.85 0.57-8.14 1.25-9.54 0.69-1.39 2.6-3.2 4.25-4.02zm-19.28 71.81l0.28 12.25c29.45 12.7 37.82 16.75 37.6 17.19-0.22 0.44-8.89 4.41-19.26 8.81l-18.87 8 0.03 24.5h75v-18c-43.13 0-50.92-0.34-50.75-1.08 0.14-0.59 8.27-4.52 18.07-8.75l17.81-7.67-0.63-12.65-38-16.35 53.5-0.5v-18h-75.06zm22.78 87.19c-2.47 0.79-6.75 2.92-9.5 4.74-2.75 1.82-6.49 5.57-8.31 8.32-1.82 2.75-4.02 7.47-4.87 10.5-1.1 3.86-1.45 8.47-1.19 15.51 0.33 8.77 0.77 10.83 3.53 16.5 1.73 3.57 4.88 8.03 7 9.91 2.11 1.89 6.32 4.59 9.34 6 5.04 2.36 6.6 2.57 18.5 2.55 10.24-0.02 13.85-0.4 17-1.79 2.2-0.98 5.73-2.99 7.84-4.48 2.11-1.49 5.35-4.95 7.19-7.7 1.84-2.75 4.11-7.7 5.05-11 1.26-4.47 1.56-8.3 1.17-15-0.31-5.53-1.31-11.13-2.58-14.5-1.29-3.42-3.89-7.37-6.87-10.42-2.64-2.7-7.27-6.05-10.3-7.44-4.69-2.17-7.19-2.58-17-2.83-7.92-0.2-12.9 0.15-16 1.13zm1.5 20.12c2.2-0.78 7.83-1.45 12.5-1.5 4.68-0.05 10.08 0.42 12 1.06 1.93 0.63 5.05 2.33 6.94 3.76 1.89 1.44 4.03 4.08 4.75 5.87 0.72 1.78 1.31 5.16 1.31 7.5 0 2.33-0.79 5.81-1.75 7.72-0.96 1.91-3.7 4.84-6.08 6.5-4.06 2.84-5 3.05-15 3.35-7.73 0.23-11.77-0.1-14.67-1.19-2.2-0.83-5.46-3.11-7.25-5.07-1.78-1.96-3.53-4.8-3.88-6.31-0.35-1.52-0.47-5.09-0.25-7.94 0.32-4.29 0.98-5.79 3.88-8.77 1.93-1.97 5.3-4.21 7.5-4.98zm-21.85 70.19c-0.88 2.06-2.17 5.88-2.86 8.49-0.81 3.06-1.06 8.19-0.72 14.5 0.42 7.67 1.11 11.04 3.24 15.76 1.53 3.4 4.75 8.03 7.44 10.7 2.62 2.58 7.45 5.95 10.75 7.48 5.41 2.5 7.1 2.78 17.02 2.8 10.35 0.01 11.43-0.18 17.5-3.13 4.26-2.07 8.13-4.99 11.3-8.5 2.64-2.95 5.77-7.83 6.95-10.85 1.77-4.54 2.15-7.61 2.15-17.5 0-9.98-0.37-12.97-2.21-17.75l-2.21-5.75c-11.62 0-15.01 0.11-15.02 0.25-0.02 0.13 1.18 2.95 2.66 6.25 1.68 3.73 2.88 8.45 3.17 12.5 0.29 4.01-0.04 8.02-0.87 10.5-0.74 2.2-2.49 5.29-3.89 6.88-1.4 1.59-4.35 3.82-6.55 4.97-3.18 1.66-5.83 2.08-13 2.08-7.18 0-9.8-0.42-13-2.09-2.2-1.15-5.46-3.72-7.25-5.72-1.86-2.07-3.52-5.23-3.88-7.37-0.35-2.07-0.43-6.68-0.17-10.25 0.32-4.32 1.37-8.27 3.14-11.75 1.46-2.89 2.66-5.48 2.66-5.75 0-0.28-3.32-0.5-7.38-0.5h-7.38zm-765.64 6.61c-2.47 0.72-5.85 2.02-7.5 2.89-1.65 0.87-4.66 3.31-6.7 5.41-2.03 2.11-4.7 6.09-5.91 8.84-1.71 3.86-2.22 6.92-2.23 13.5-0.01 6.96 0.44 9.49 2.49 14 1.38 3.02 4.05 7.04 5.93 8.92 1.88 1.88 5.9 4.57 8.92 5.98 4.67 2.17 6.93 2.56 15 2.58 6.42 0.01 11.2-0.55 14.75-1.73l5.25-1.75c0-9.3-0.34-12.02-0.75-12.03-0.41-0.01-2.77 0.84-5.25 1.9-2.47 1.06-6.75 2.24-9.5 2.61-3.64 0.5-6.09 0.24-9-0.96-2.2-0.9-4.85-2.41-5.89-3.33-1.04-0.93-2.72-3.49-3.73-5.69-1.16-2.53-1.85-6.4-1.88-10.5-0.03-4.94 0.52-7.59 2.3-11 1.29-2.48 3.89-5.55 5.78-6.84 3-2.05 4.33-2.28 10.92-1.94 4.53 0.24 9.09 1.14 11.5 2.28 2.2 1.04 4.34 2.03 4.75 2.19 0.41 0.17 0.76-2.51 0.78-5.94l0.02-6.25c-8.17-2.9-13.92-3.89-18.05-4.09-4.32-0.2-9.41 0.2-12 0.95zm-116 30.64v31h16v-23c8.11 0 9.54 0.55 11.75 2.81 1.51 1.54 4.55 6.73 6.75 11.52l4 8.72c12.79-0.04 16.5-0.28 16.5-0.55 0-0.28-2.81-6-6.25-12.73-4.38-8.56-7.07-12.67-8.99-13.75-1.51-0.84-2.75-1.86-2.75-2.27-0.01-0.42 0.44-0.75 0.99-0.75 0.55 0 2.35-0.9 4-2 1.73-1.16 3.68-3.81 4.6-6.25 1.15-3.06 1.4-5.66 0.89-9.25-0.55-3.91-1.51-5.8-4.35-8.62-2.62-2.61-5.1-3.93-8.89-4.75-2.89-0.62-11.77-1.13-19.75-1.13h-14.5zm16-19h6q6 0 7.5 1.5c0.83 0.82 1.77 2.51 2.1 3.75 0.32 1.23 0.32 3.26 0 4.5-0.33 1.23-1.31 2.92-2.17 3.75-1.04 0.98-3.6 1.5-13.43 1.5v-7.5zm49 19v31h16v-62h-16zm94 0v31h16l-0.01-24.5 24.51 24.49 20-0.03c-25.25-25.16-32.45-32.69-32.29-32.96 0.17-0.28 6.71-6.8 14.55-14.5 9.08-8.93 14.57-13.64 15.15-13 0.5 0.55 5.9 8.65 12.01 18l11.11 17-0.03 25.5h16l0.05-26.5c15.68-24.03 20.85-32.02 21.59-33.25l1.36-2.25-17.5 0.09-13.75 22.41c-8.83-13.95-11.92-19.02-12.57-20.25-1.16-2.21-1.52-2.25-19.39-2.25h-18.2l-22.6 22.5 0.01-22.5h-16z";

        const p0 = new Path2D(p0Data);
        const p1 = new Path2D(p1Data);
        const p2 = new Path2D(p2Data);

        let level = 0;
        let progress = 0;
        let time = 0;
        let particles = [];
        let cracks = [];
        let isHardening = false;

        const scale = SIZE / 1080;

        const gritCount = 280;
        const staticGrit = Array.from({ length: gritCount }, () => ({
            x: Math.random() * SIZE,
            y: Math.random() * SIZE,
            size: 1 + Math.random() * 2
        }));

        function drawConcreteMass(yFill, isGreen = false) {
            const surfaceY = SIZE - yFill;
            const wave = (progress < 100) ? Math.sin(time * 3.5) * 5 : 0;
            const bulge = (progress < 100) ? 16 : 0;

            ctx.fillStyle = isGreen ? 'var(--brand-green)' : '#4a4a4a';
            ctx.beginPath();
            ctx.moveTo(0, surfaceY);
            
            for (let x = 0; x <= SIZE; x++) {
                const dist = Math.abs(x - SIZE/2) / (SIZE/2);
                const mound = Math.exp(-Math.pow(dist * 6, 2)) * bulge;
                ctx.lineTo(x, surfaceY + wave - mound);
            }
            
            ctx.lineTo(SIZE, SIZE);
            ctx.lineTo(0, SIZE);
            ctx.fill();

            if (!isGreen) {
                ctx.save();
                staticGrit.forEach((g, i) => {
                    if (g.y > surfaceY && g.y < SIZE) {
                        ctx.fillStyle = (i % 3 === 0) ? '#555' : '#888';
                        ctx.fillRect(g.x, g.y, g.size, g.size);
                    }
                });
                ctx.restore();
            }
        }

        function generateCracks() {
            cracks = [];
            const crackCount = 8;
            for (let i = 0; i < crackCount; i++) {
                const startX = Math.random() * SIZE;
                const startY = Math.random() * (SIZE * 0.7);
                const angle = Math.random() * Math.PI * 2;
                const length = 40 + Math.random() * 80;
                cracks.push({
                    startX,
                    startY,
                    angle,
                    length,
                    opacity: 0,
                    maxOpacity: 0.3 + Math.random() * 0.4
                });
            }
        }

        function drawCracks() {
            cracks.forEach((crack, idx) => {
                crack.opacity = Math.min(crack.maxOpacity, crack.opacity + 0.02);
                
                ctx.strokeStyle = `rgba(100, 100, 100, ${crack.opacity})`;
                ctx.lineWidth = 1 + Math.random() * 0.5;
                ctx.beginPath();
                ctx.moveTo(crack.startX, crack.startY);
                
                let x = crack.startX;
                let y = crack.startY;
                const segments = Math.floor(crack.length / 5);
                
                for (let i = 0; i < segments; i++) {
                    const deviation = (Math.random() - 0.5) * 0.3;
                    const angle = crack.angle + deviation;
                    x += Math.cos(angle) * 5;
                    y += Math.sin(angle) * 5;
                    ctx.lineTo(x, y);
                }
                
                ctx.stroke();
            });
        }

        function drawViscousStream(streamH, isGreen = false) {
            const streamX = SIZE / 2;
            const baseWidth = 32;
            const pulse = Math.sin(time * 10) * 4;
            const taper = 0.7; 
            
            ctx.save();
            ctx.beginPath();
            ctx.moveTo(streamX - (baseWidth/2 + pulse), 0);
            ctx.bezierCurveTo(
                streamX - (baseWidth/2 + pulse), streamH * 0.3,
                streamX - (baseWidth/2 * taper + pulse), streamH * 0.6,
                streamX - (baseWidth/4 + pulse), streamH
            );
            ctx.lineTo(streamX + (baseWidth/4 + pulse), streamH);
            ctx.bezierCurveTo(
                streamX + (baseWidth/2 * taper + pulse), streamH * 0.6,
                streamX + (baseWidth/2 + pulse), streamH * 0.3,
                streamX + (baseWidth/2 + pulse), 0
            );
            
            ctx.fillStyle = isGreen ? 'var(--brand-green)' : '#3a3a3a'; 
            ctx.fill();

            if (!isGreen) {
                ctx.strokeStyle = 'rgba(255,255,255,0.05)';
                ctx.lineWidth = 2;
                ctx.stroke();

                for(let i=0; i<8; i++) {
                    const py = ( (time * 800 + i * 60) % (streamH || 1) );
                    const px = streamX + Math.sin(time * 12 + i) * 6;
                    ctx.fillStyle = '#666';
                    ctx.beginPath();
                    ctx.arc(px, py, 2, 0, Math.PI*2);
                    ctx.fill();
                }
            }
            ctx.restore();
        }

        function animate() {
            time += 0.035;
            ctx.clearRect(0, 0, SIZE, SIZE);

            if (level < SIZE) {
                level += 1.8; 
                progress = Math.min(100, Math.floor((level / SIZE) * 100));
            }

            ctx.save();
            ctx.scale(scale, scale);
            ctx.fillStyle = 'rgba(255,255,255,0.015)';
            [p0, p1, p2].forEach(p => ctx.fill(p, 'evenodd'));
            ctx.restore();

            [
                { path: p0, isSpecial: false },
                { path: p1, isSpecial: false },
                { path: p2, isSpecial: false }
            ].forEach(item => {
                ctx.save();
                ctx.scale(scale, scale);
                ctx.clip(item.path, 'evenodd');
                ctx.scale(1/scale, 1/scale);
                
                drawConcreteMass(level, item.isSpecial);

                if (progress < 100) {
                    drawViscousStream(SIZE - level + 10, item.isSpecial);
                }

                if (!item.isSpecial) {
                    particles.forEach(p => {
                        ctx.save();
                        ctx.translate(p.x, p.y);
                        ctx.rotate(p.rot);
                        ctx.fillStyle = `rgba(60, 60, 60, ${p.life})`;
                        ctx.beginPath();
                        ctx.ellipse(0, 0, p.w, p.h, 0, 0, Math.PI*2);
                        ctx.fill();
                        ctx.restore();
                    });
                }
                ctx.restore();
            });

            if (progress < 100 && Math.random() > 0.4) {
                const streamH = SIZE - level;
                particles.push({
                    x: (SIZE / 2) + (Math.random() - 0.5) * 40,
                    y: streamH,
                    vx: (Math.random() - 0.5) * 10,
                    vy: -Math.random() * 10 - 2,
                    life: 1.0,
                    w: 2 + Math.random() * 3,
                    h: 4 + Math.random() * 6,
                    rot: Math.random() * Math.PI
                });
            }
            particles.forEach(p => {
                p.x += p.vx; 
                p.y += p.vy; 
                p.vy += 0.6;
                p.life -= 0.04;
                p.rot += 0.1;
            });
            particles = particles.filter(p => p.life > 0);

            if (progress < 100) {
                requestAnimationFrame(animate);
            } else {
                setTimeout(() => {
                    const loaderWrapper = document.getElementById('loader-wrapper');
                    if (loaderWrapper) {
                        loaderWrapper.classList.add('closing');
                        setTimeout(() => {
                            loaderWrapper.remove();
                            document.body.classList.remove('loader-active');
                        }, 600);
                    }
                }, 500);
            }
        }

        animate();
    })();
</script>
